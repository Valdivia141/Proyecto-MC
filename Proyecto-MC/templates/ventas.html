{% extends "base.html" %}

{% block title %}Productos{% endblock %}

{% block content %}
<h1>Productos</h1>

<form action="/agregar" method="POST">
    <input type="text" name="nombre" placeholder="Nombre del producto" required>
    <input type="number" step="0.01" name="precio" placeholder="Precio" required>
    <input type="number" name="stock" placeholder="Stock" required>
    <select name="categoria_id" required>
        <option value="">Selecciona categoría</option>
        {% for categoria in categorias %}
            <option value="{{ categoria['id'] }}">{{ categoria['nombre'] }}</option>
        {% endfor %}
    </select>
    <button type="submit">Agregar producto</button>
</form>

<h2>Lista de productos</h2>
<ul>
    {% for producto in productos %}
        <li>
            {{ producto['nombre'] }} — ${{ producto['precio'] }} — Stock: {{ producto['stock'] }} — Categoría: {{ producto['categoria_nombre'] or 'Sin categoría' }}
            <!-- Enlace para editar -->
            <a href="{{ url_for('editar_producto', producto_id=producto['id']) }}">Editar</a>

            <!-- Enlace para eliminar -->
            <a href="{{ url_for('eliminar_producto', producto_id=producto['id']) }}" onclick="return confirm('¿Estás seguro de eliminar este producto?');">Eliminar</a>
        </li>
    {% endfor %}
</ul>
{% endblock %}
